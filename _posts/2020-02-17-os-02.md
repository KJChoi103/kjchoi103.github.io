---
layout: post
title:  "컴퓨터 시스템의 동작원리-1"
date:   2020-02-17
desc: "컴퓨터 구조 공부"
keywords: "Computer Structure"
categories: [Os]
tags: [Computer Structure, Operation System]
icon: 
---

# 컴퓨터 시스템의 구조   
* 컴퓨터 내부 장치: CPU, 메모리   
  컴퓨터 외부 장치: 디스크, 키보드, 마우스, 모니터, 네트워크 장치 등   

* 컴퓨터의 업무 처리 방식   
컴퓨터 외부 장치에서 컴퓨터 내부로 데이터를 읽어옴: (input)   
--> 각종 연산을 수행한 후 그 결과를 컴퓨터 외부장치로 내보냄: 출력(output)      
우리가 카톡으로 보낼 메시지를 입력하고 우리가 입력한 내용을 모니터로 확인하는 것도 일종의 입출력   
   
* 컴퓨터내의 각 하드웨어 장치에는 Controller가 있다.   
컨트롤러는 일종의 작은 CPU라고도 하며, 각 하드웨어마다 존재하면서 이들을 제어한다.   

* * *
## CPU와 I/O 연산   
![CPU와 I/O 연산](https://eunhyejung.github.io/assets/contents/content02.PNG)   
* 컴퓨터 전체에 CPU라는 중앙처리장치가 있듯이, 컨트롤러는 각 하드웨어 장치마다 존재하면서, 이들을 제어하는 작는 CPU라 할 수 있다.
* 각 장치마다 설치된 컨트롤러에는 장치로부터 들어오고 나가는 데이터를 임시로 저장하기 위한 작은 메모리를 가지고 있는데 이를 Local Buffer라 한다.
* 예를들어, 식사를 하며 영화를 보려 한다.   
  플레이어를 통해 영화 파일을 보려하면, 파일을 열려고 하는 이벤트 발생시, 디스크 컨트롤러가 물리적인 디스크에서 내용을 읽어 이를 로컬 버퍼에 저장하게 된다.   
  디스크에서 로컬버퍼로 내용을 다 읽은 후, 이를 CPU에게 알려야 하는데 이 행위를 Interrupt라고 한다.   
  --> CPU가 데이터를 다 가져왔는지 확인하는 것이 아니라, **장치에 있는 컨트롤러**가 체크하는 것
* CPU는 옆에 Interrupt Line을 가지고 있는데, 자신의 일을 하다가 Interrupt Line에 신호가 들어오면 하던일을 멈추고 Interrupt와 관련된 일을 처리한다.   
* 인터럽트는 키보드 입력 혹은 디스크에서 데이터를 다 읽어왔다는 등의 이벤트를 CPU에게 알려 줄 필요가 있을 때 **컨트롤러가** 발생시키는 것이다.
* * *

## 인터럽트의 일반적인 기능   
* 운영체제 커널에는 인터럽트가 들어왔을 때 해야 할 일을 미리 다 프로그래밍해서 보관하고 있다.   
  이렇게 다양한 인터럽트에 대해 각각 처리 해야할 업무들을 정의한 것을 인터럽트 처리 루틴이라고 한다.   
* 앞의 예와 같이 디스크 컨트롤러가 인터럽트를 발생시키면, CPU는 하던 일을 잠시 멈추고, 이 인터럽트가 발생했을 대 수행해야 할 코드영역(인터럽트 처리 루틴)으로 가서 정의된 일을 수행하게 된다.   
  이때 수행하는 구체적인 일들은 다음과 같다.
  1. 로컬 버퍼에 있는 내용을 플레이어 프로그램이 사용 할 수 있도록 메모리로 전달
  2. 플레이어가 CPU를 할당받을 경우 다음 명령(Instruction)을 수행 할 수 있음을 표시
* 운영체제는 할 일을 쉽게 찾아가기 위해 Interrupt Vector를 가지고 있다.   
  Interrupt Vector : 인터럽트의 종류마다 번호를 정해서 번호에 따라 처리해야 할 코드가 위치한 부분을 포인터로 가리키고 있는 자료구조.
* 실제 처리해야 할 내용은 Interrupt Service Routine이라는 다른 곳에 정의된다.   
  인터럽트 서비스 루틴을 통해 해당하는 인터럽트 처리를 완료하고 나면, 원래 하고 있던 작업으로 돌아가서 하던 일을 계속 진행한다.   
  그래서 인터럽트 처리 전, 하고 있던 작업에 대한 정보를 반드시 저장해야 하고 운영체제는 이런 정보를 저장하는 별도의 장소를 가지고 있다.
  
    




