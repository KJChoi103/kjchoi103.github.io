---
layout: post
title:  "컴퓨터 시스템의 동작원리-3"
date:   2020-02-19
desc: "컴퓨터 구조 공부"
keywords: "Computer Structure"
categories: [Os]
tags: [Computer Structure, Operation System]
icon: 
---

# 하드웨어 보안   
* 여러 프로그램이 동시에 실행되는 다중 프로그래밍 환경에서는 각 프로그램들이 다른 프로그램의 실행을 방해하거나 프로그램들간의 충돌 문제를 막기 위해 하드웨어에 대한 각종 보안이 요구됨.
* 하드웨어적 보안유지를 위해 OS는 기본적으로 커널모드/사용자모드의 오퍼레이션을 지원한다.
  * Kernel Mode   
    운영체제가 CPU의 제어권을 가지고 운영체제의 코드를 실행하는 모드.   
    커널모드에서는 모든 종류의 명령 실행 가능   
  * User Mode   
    일반 사용자 프로그램 실행 모드.    
    제한적인 명령만 실행 가능.
    
* 시스템에 중요한 영향을 미치는 연산은 커널모드에서만 실행가능하게 함으로써 하드웨어의 보안을 유지함.   
  하지만 사용자 프로그램이 CPU를 가지고 있는 동안에는 운영체제가 CPU를 가지고 있지 않으므로 사용자 프로그램이 운영체제만 수행가능한 중요한 연산을 수행할 수도 있다.   
  따라서 컴퓨터 시스템은 CPU내부에 Mode Bit를 두어 사용자 프로그램을 감시한다.   
  
* 모드비트가 0: 커널모드: 모든 명령 수행 가능.   
  모드비트가 1: 사용자 모드: 제한된 명령만 수행 가능.
  
* CPU는 보안 관련 명령을 수행하기 전에는 항상 모드비트를 조사해 모드비트가 0으로 세팅된 경우에만 해당 명령을 수행한다.   
  사용자 프로그램이 실행되다 하드웨어 접근 등 보안이 필요한 중요한 명령을 실행해야 할 경우에는 시스템콜을 통해 운영체제에게 서비스를 대신해 줄 것을 요청한다.   
  그러면 CPU의 제어권은 다시 운영체제에 넘어가고, 모드비트가 자동적으로 0으로 세팅되어 운영체제는 모든 필요한 명령을 실행 할 수 있게된다.   
  요청된 작업이 모두 끝나면, 모드 비트를 다시 1로 세팅하여 사용자 프로그램에 CPU를 넘겨주게 된다.   
  
* 이와 같이 시스템 보안과 관련된 명령들을 **특권명령**이라고 지칭하며, 특권명령은 모드비트가 0일 때만 실행가능하다.   
  사용자 프로그램이 디스크에 저장되어있는 (본인 소유가 아닌)파일에 접근하는 것을 방지해야 하므로 모든 입출력 명령도 특권명령으로 규정되고, 사용자 프로그램이 직접 입출력하는 것을 차단한다.   
  사용자 프로그램이 입출력을 하고싶으면 시스템콜로 운영체제에 요청해야 하고, 운영체제가 입출력 명령을 대신 수행한다. 운영체제는 입출력 요청이 올바른 요청인지 확인 후 입출력을 실행하기 때문에 파일에 대한 보안을 유지할 수 있게 된다.   
  
---
